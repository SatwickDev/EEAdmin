<!DOCTYPE html>
<html>
<head>
    <title>Test Conversation Routes</title>
</head>
<body>
    <h1>Test Conversation API Routes</h1>
    <button onclick="testRoutes()">Test Routes Loaded</button>
    <button onclick="testHistory()">Test Conversation History</button>
    <button onclick="testHistoryWithSession()">Test History with Session</button>
    <pre id="result"></pre>

    <script>
        function showResult(text) {
            document.getElementById('result').textContent = text;
        }

        async function testRoutes() {
            try {
                const response = await fetch('/api/test/routes-loaded');
                const data = await response.json();
                showResult(`Test Routes: ${response.status}\n${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                showResult(`Error: ${error}`);
            }
        }

        async function testHistory() {
            try {
                const response = await fetch('/api/conversation/history', {
                    credentials: 'include'
                });
                const data = await response.json();
                showResult(`History: ${response.status}\n${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                showResult(`Error: ${error}`);
            }
        }

        async function testHistoryWithSession() {
            try {
                const sessionId = 'test_session_' + Date.now();
                const response = await fetch(`/api/conversation/history?session_id=${sessionId}`, {
                    credentials: 'include'
                });
                const data = await response.json();
                showResult(`History with Session: ${response.status}\n${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                showResult(`Error: ${error}`);
            }
        }
    </script>
</body>
</html>